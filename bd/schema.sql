CREATE TABLE IF NOT EXISTS client(
  id_client int NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  names VARCHAR ,
  surname VARCHAR,
  age int,
  gender VARCHAR,
  email VARCHAR,
  job VARCHAR,
  city VARCHAR,
  CONSTRAINT client_pkey PRIMARY KEY(id_client)
);

CREATE TABLE query(
  id_query int NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  id_client int,
  salary int,
  qty_rent int,
  like_beach int,
  like_montain int,
  like_hot int,
  like_cold int,
  cost_of_living int,
  health_insurance int,
  outdoor_activities int,
  criminality_preference int,
  CONSTRAINT id_client_fkey FOREIGN KEY(id_client) REFERENCES client(id_client),
  CONSTRAINT id_query_pkey PRIMARY KEY(id_query)
);

CREATE TABLE results(
  id_result int NOT NULL NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  id_query int,
  result varchar,
  CONSTRAINT id_query_fkey FOREIGN KEY(id_query) REFERENCES query(id_query),
  CONSTRAINT id_result_pkey PRIMARY KEY(id_result)
);

CREATE TABLE feedback_results(
  id_fbck_result int NOT NULL NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  id_result int,
  feedback int, 
  CONSTRAINT id_result_fkey FOREIGN KEY(id_result) REFERENCES results(id_result),
  CONSTRAINT id_fbck_result_pkey PRIMARY KEY(id_fbck_result)
);

CREATE TABLE kiribati_dataset(
  id_city INT NOT NULL NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  city                             VARCHAR,
  avg_rent                  int  NOT NULL,
  idx_ipc                         numeric(5,2) NOT NULL,
  criminality_rate               numeric(3,1)  NOT NULL,
  pp_atention               numeric(3,2)  NOT NULL,
  temp                       numeric(3,1)  NOT NULL,
  culture                            int  NOT NULL,
  sport                            numeric(3,2)  NOT NULL,
  altitude              INTEGER  NOT NULL,
  km_to_beach                    numeric(4,1)  NOT NULL,
  prcntge_zv                     numeric(4,2)  NOT NULL,
  bars                              numeric(3,1)  NOT NULL,
  temp_rank                   numeric(3,2)  NOT NULL,
  cma_rank                           numeric(3,2)  NOT NULL,
  ipc_rank                           numeric(3,2)  NOT NULL,
  criminality_rank                  numeric(3,2)  NOT NULL,
  prof_ap_rank                       numeric(3,2)  NOT NULL,
  culture_rank                       numeric(3,2)  NOT NULL,
  sports_rank                       numeric(3,2)  NOT NULL,
  green_zone_rank                  numeric(3,2)  NOT NULL,
  km_beach_rank               numeric(3,2)  NOT NULL,
  bars_rank                         numeric(3,2)  NOT NULL,
  CONSTRAINT id_ciudad_ds PRIMARY KEY(id_city)
);
